@page "/Tools"
@using SwanseaCompSci.LabManagementSystem.Core.Application.Common.Enums

<PageTitle>@Title</PageTitle>

<AuthorizeView Roles="@ApplicationRole.Administrator.ToString()">
    <Authorized>
        <MudText Typo="Typo.h6">@Title</MudText>
        <MudGrid Justify="Justify.Center">
            <MudItem>
                <MudButton Variant="Variant.Outlined"
                           Color="@Color.Info"
                           Class="pa-4"
                           Href="/Tools/Allocation">
                    <MudStack AlignItems="AlignItems.Center">
                        <MudText>Allocations</MudText>
                        <MudIcon Icon="@Icons.Material.Filled.Groups" Color="@Color.Info" />
                    </MudStack>
                </MudButton>
            </MudItem>

            <MudItem>
                <MudButton Variant="Variant.Outlined"
                           Color="@Color.Warning"
                           Class="pa-4"
                           OnClick="@(() => SendQuestionnairesAsync())">
                    <MudStack AlignItems="AlignItems.Center">
                        <MudText>Send Questionnaires</MudText>
                        <MudIcon Icon="@Icons.Material.Filled.Warning" Color="@Color.Warning" />
                    </MudStack>
                </MudButton>
            </MudItem>

            <MudItem>
                <MudButton Variant="Variant.Outlined"
                           Color="@Color.Error"
                           Class="pa-4"
                           OnClick="@(() => ResetSystemAsync())">
                    <MudStack AlignItems="AlignItems.Center">
                        <MudText>Reset System</MudText>
                        <MudIcon Icon="@Icons.Material.Filled.Dangerous" Color="@Color.Error" />
                    </MudStack>
                </MudButton>
            </MudItem>
        </MudGrid>
    </Authorized>
    <NotAuthorized>
        @{
            try
            {
                NavigationManager.NavigateTo("/401");
            }
            catch { } // Safe to ignore exception
        }
    </NotAuthorized>
</AuthorizeView>
